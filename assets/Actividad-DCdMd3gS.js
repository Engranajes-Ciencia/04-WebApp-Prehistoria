import{d as y,a as R,u as I,e as E,r,v as P,f as S,m as k,j as a}from"./index-BPDs7vRk.js";function Q(){const{id:o}=y(),u=R(),{t:i}=I("pages"),e=E.find(t=>t.id===parseInt(o)),n=localStorage.getItem("avatar"),c=localStorage.getItem("nombre"),p=localStorage.getItem("accesoQR"),l=r.useRef(null),[g,h]=r.useState(!1),j=()=>{l.current&&(g?l.current.pause():l.current.play().catch(t=>{console.warn("Autoplay bloqueado por el navegador",t)}),h(!g))},d=r.useRef(null),[v,b]=r.useState(!1),x=()=>{d.current&&(v?d.current.pause():d.current.play().catch(t=>console.warn("Autoplay bloqueado",t)),b(!v))};if(r.useEffect(()=>{if(p!=="true"||!P(c)||!S(n)){alert(i("actividad.accesoDenegado")),u("/EscanerQR");return}k(Number(o))},[o,u,n,c,p]),!e||!n||!c)return a.jsx("div",{className:"actividad-container",style:{backgroundImage:"url(/04-WebApp-Prehistoria/assets/images/nogenially/bienvenida.jpeg)",backgroundSize:"cover",backgroundPosition:"center"},children:a.jsx("p",{className:"error-msg",children:i("actividad.error")})});const f=`/04-WebApp-Prehistoria/assets/avatars/${n}.png`,m=e.imagenFondo||e.imagenAlternativa;m.startsWith("/")&&m.substring(1);const A='<span class="math-inline">{import.meta.env.BASE_URL}</span>{rutaImagenSinBarraInicial}',N=e.geniallyURL&&e.geniallyURL.trim()!==""&&e.geniallyURL!=="#",s=i(`${o}`,{returnObjects:!0});return a.jsxs("div",{className:"actividad-container",style:{backgroundImage:`url(${A})`,backgroundSize:"cover",backgroundPosition:"center"},children:[a.jsxs("div",{className:"saludo-titulo",children:[a.jsxs("div",{className:"titulo-mensaje",children:[a.jsx("h3",{children:s.titulo}),s.avatarDialogo.mensaje!=="#"&&a.jsx("p",{children:s.avatarDialogo.mensaje})]}),a.jsxs("div",{className:"actividad-header",children:[a.jsx("img",{src:f,alt:"avatar",className:"avatar-actividad"}),a.jsxs("div",{children:[a.jsx("h2",{className:"saludo1",children:i("actividad.saludo",{nombre:c})}),a.jsx("p",{className:"dialogo",children:s.avatarDialogo.dialogo})]})]})]}),e.audio&&a.jsxs("div",{className:"audio-button-container",children:[a.jsx("button",{onClick:j,className:"audio-button",children:i(g?"actividad.pausarAudio":"actividad.reproducirAudio")}),a.jsx("audio",{ref:l,src:`/04-WebApp-Prehistoria/${e.audio.replace(/^\/+/,"")}`,preload:"auto"}),e.audioENG&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:x,className:"audio-button-alt",children:i(v?"actividad.pausarAudioENG":"actividad.reproducirAudioENG")}),a.jsx("audio",{ref:d,src:`/04-WebApp-Prehistoria/${e.audioENG.replace(/^\/+/,"")}`,preload:"auto"})]})]}),s.avatarDialogo.sabiasQue!=="#"&&a.jsxs("p",{className:"sabiasque",children:[a.jsx("strong",{children:i("actividad.sabiasQue")})," ",s.avatarDialogo.sabiasQue]}),N?a.jsx("div",{className:"actividad-genially",children:a.jsx("iframe",{src:e.geniallyURL,width:"100%",height:"500px",frameBorder:"0",allowFullScreen:!0,title:"Genially actividad"})}):a.jsx("div",{className:"actividad-siguiente",children:a.jsxs("button",{className:"btn-siguiente",onClick:()=>u("/EscanerQR"),children:["ðŸ“² ",i("Escanear codigo QR")]})})]})}export{Q as default};
