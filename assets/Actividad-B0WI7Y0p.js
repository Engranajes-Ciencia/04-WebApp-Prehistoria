import{d as N,a as y,u as R,e as P,r,v as E,f as k,m as I,j as a}from"./index-KthLpppk.js";function Q(){const{id:o}=N(),u=y(),{t:e}=R("pages"),i=P.find(t=>t.id===parseInt(o)),c=localStorage.getItem("avatar"),n=localStorage.getItem("nombre"),m=localStorage.getItem("accesoQR"),d=r.useRef(null),[g,p]=r.useState(!1),h=()=>{d.current&&(g?d.current.pause():d.current.play().catch(t=>{console.warn("Autoplay bloqueado por el navegador",t)}),p(!g))},l=r.useRef(null),[v,j]=r.useState(!1),b=()=>{l.current&&(v?l.current.pause():l.current.play().catch(t=>console.warn("Autoplay bloqueado",t)),j(!v))};if(r.useEffect(()=>{if(m!=="true"||!E(n)||!k(c)){alert(e("actividad.accesoDenegado")),u("/EscanerQR");return}I(Number(o))},[o,u,c,n,m]),!i||!c||!n)return a.jsx("div",{className:"actividad-container",style:{backgroundImage:"url(/04-WebApp-Prehistoria/assets/images/nogenially/bienvenida.jpeg)",backgroundSize:"cover",backgroundPosition:"center"},children:a.jsx("p",{className:"error-msg",children:e("actividad.error")})});const x=`/04-WebApp-Prehistoria/assets/avatars/${c}.png`,f=i.imagenFondo||i.imagenAlternativa,A=i.geniallyURL&&i.geniallyURL.trim()!==""&&i.geniallyURL!=="#",s=e(`${o}`,{returnObjects:!0});return a.jsxs("div",{className:"actividad-container",style:{backgroundImage:`url(${f})`,backgroundSize:"cover",backgroundPosition:"center"},children:[a.jsxs("div",{className:"saludo-titulo",children:[a.jsxs("div",{className:"titulo-mensaje",children:[a.jsx("h3",{children:s.titulo}),s.avatarDialogo.mensaje!=="#"&&a.jsx("p",{children:s.avatarDialogo.mensaje})]}),a.jsxs("div",{className:"actividad-header",children:[a.jsx("img",{src:x,alt:"avatar",className:"avatar-actividad"}),a.jsxs("div",{children:[a.jsx("h2",{className:"saludo1",children:e("actividad.saludo",{nombre:n})}),a.jsx("p",{className:"dialogo",children:s.avatarDialogo.dialogo})]})]})]}),i.audio&&a.jsxs("div",{className:"audio-button-container",children:[a.jsx("button",{onClick:h,className:"audio-button",children:e(g?"actividad.pausarAudio":"actividad.reproducirAudio")}),a.jsx("audio",{ref:d,src:`/04-WebApp-Prehistoria/${i.audio.replace(/^\/+/,"")}`,preload:"auto"}),i.audioENG&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:b,className:"audio-button-alt",children:e(v?"actividad.pausarAudioENG":"actividad.reproducirAudioENG")}),a.jsx("audio",{ref:l,src:`/04-WebApp-Prehistoria/${i.audioENG.replace(/^\/+/,"")}`,preload:"auto"})]})]}),s.avatarDialogo.sabiasQue!=="#"&&a.jsxs("p",{className:"sabiasque",children:[a.jsx("strong",{children:e("actividad.sabiasQue")})," ",s.avatarDialogo.sabiasQue]}),A?a.jsx("div",{className:"actividad-genially",children:a.jsx("iframe",{src:s.geniallyURL,width:"100%",height:"500px",frameBorder:"0",allowFullScreen:!0,title:"Genially actividad"})}):a.jsx("div",{className:"actividad-siguiente",children:a.jsxs("button",{className:"btn-siguiente",onClick:()=>u("/EscanerQR"),children:["ðŸ“² ",e("Escanear codigo QR")]})})]})}export{Q as default};
