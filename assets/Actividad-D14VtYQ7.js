import{b as p,u as h,d as x,r as d,v as j,e as f,m as b,j as a}from"./index-DFhraULb.js";function R(){const{id:o}=p(),l=h(),s=x.find(n=>n.id===parseInt(o)),i=localStorage.getItem("avatar"),r=localStorage.getItem("nombre"),u=localStorage.getItem("accesoQR"),t=d.useRef(null),[c,m]=d.useState(!1),v=()=>{t.current&&(c?t.current.pause():t.current.play().catch(n=>{console.warn("Autoplay bloqueado por el navegador",n)}),m(!c))};if(d.useEffect(()=>{if(u!=="true"||!j(r)||!f(i)){alert("Acceso no autorizado. Por favor, escanea un QR válido."),l("/EscanerQR");return}b(Number(o))},[o,l,i,r,u]),!s||!i||!r)return a.jsx("p",{className:"error-msg",children:"Actividad no encontrada o acceso no permitido."});const e=s.avatarDialogo[i],g=`/04-WebApp-Prehistoria/assets/avatars/${i}.png`;return a.jsxs("div",{className:"actividad-container",children:[a.jsxs("div",{className:"actividad-header",children:[a.jsx("img",{src:g,alt:"avatar",className:"avatar-actividad"}),a.jsxs("h2",{children:["¡Hola ",r,"! Soy tu guía en esta parada"]})]}),a.jsx("h3",{children:s.titulo}),(e==null?void 0:e.mensaje)&&a.jsx("p",{children:e.mensaje}),s.audio&&a.jsxs("div",{className:"audio-button-container",children:[a.jsx("button",{onClick:v,className:"audio-button",children:c?"⏸️ Pausar audio":"▶️ Reproducir audio"}),a.jsx("audio",{ref:t,src:s.audio,preload:"auto"})]}),(e==null?void 0:e.sabiasQue)&&a.jsxs("p",{className:"sabiasque",children:[a.jsx("strong",{children:"¿Sabías que...?"})," ",e.sabiasQue]}),s.geniallyURL&&a.jsx("div",{className:"actividad-genially",children:a.jsx("iframe",{src:s.geniallyURL,width:"100%",height:"500px",frameBorder:"0",allowFullScreen:!0,title:"Genially actividad"})})]})}export{R as default};
